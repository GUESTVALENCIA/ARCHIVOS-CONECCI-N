<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Sandra Ultra Â· GuestsValencia ProTech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>ğŸ™ï¸ Sandra Ultra Â· MultilingÃ¼e Â· Realtime + STT</h1>
    <p class="sub">DetecciÃ³n automÃ¡tica de idioma Â· TranscripciÃ³n en la misma sesiÃ³n Realtime Â· 3 rutas sin conflicto</p>
  </header>

  <section class="grid">
    <div class="card">
      <h2>1) Dispositivos y Preferencias</h2>
      <div class="row">
        <label>MicrÃ³fono</label>
        <select id="micSelect"></select>
      </div>
      <div class="row">
        <label>Salida Â· ConversaciÃ³n</label>
        <select id="outRealtime"></select>
      </div>
      <div class="row">
        <label>Salida Â· Avatar</label>
        <select id="outAvatar"></select>
      </div>
      <div class="row">
        <label>Idioma STT manual</label>
        <select id="sttLang">
          <option value="">Auto (recomendado)</option>
          <option value="es">EspaÃ±ol (es)</option>
          <option value="en">English (en)</option>
          <option value="fr">FranÃ§ais (fr)</option>
          <option value="it">Italiano (it)</option>
          <option value="de">Deutsch (de)</option>
          <option value="pt">PortuguÃªs (pt)</option>
        </select>
      </div>
      <div class="row">
        <button id="btnInit">Inicializar audio</button>
        <span id="initStatus" class="status"></span>
      </div>
    </div>

    <div class="card">
      <h2>2) Dictado (WS STT con autoidioma)</h2>
      <div class="row">
        <button id="btnStartSTT" disabled>Iniciar Dictado</button>
        <button id="btnStopSTT" disabled>Detener</button>
        <span id="sttStatus" class="status"></span>
      </div>
      <textarea id="sttTranscript" placeholder="TranscripciÃ³n WSâ€¦" rows="8"></textarea>
      <p class="small">El primer bloque detecta idioma automÃ¡ticamente. Luego fija el idioma para mayor precisiÃ³n.</p>
    </div>

    <div class="card">
      <h2>3) ConversaciÃ³n Realtime (audio + transcripciÃ³n integrada)</h2>
      <div class="row">
        <button id="btnStartRT" disabled>Conectar ConversaciÃ³n</button>
        <button id="btnStopRT" disabled>Desconectar</button>
        <span id="rtStatus" class="status"></span>
      </div>
      <div class="row">
        <label>Modelo</label>
        <input id="rtModel" value="gpt-4o-realtime-preview-2024-12-17">
      </div>
      <audio id="rtAudio" autoplay></audio>
      <textarea id="rtTranscript" placeholder="TranscripciÃ³n Realtimeâ€¦" rows="8"></textarea>
      <p class="small">La sesiÃ³n Realtime devuelve texto y audio sincronizados por el mismo peer.</p>
    </div>

    <div class="card">
      <h2>4) Avatar (RTC del proveedor)</h2>
      <div class="row">
        <button id="btnStartAV" disabled>Conectar Avatar</button>
        <button id="btnStopAV" disabled>Desconectar</button>
        <span id="avStatus" class="status"></span>
      </div>
      <video id="avVideo" autoplay playsinline></video>
      <audio id="avAudio" autoplay></audio>
      <div class="small">Integra el SDK/RTC real del proveedor (HeyGen/GIGN/Cartesia) en <code>app.js</code>.</div>
    </div>
  </section>

  <footer>
    <p>Â© <span id="year"></span> GuestsValencia Â· Sandra Ultra Â· build: 2025-08-26T00:27:35.868750</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>

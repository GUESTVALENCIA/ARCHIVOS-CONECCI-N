<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GUESTS VALENCIA · Alquiler Vacacional de Lujo con Sandra IA 7.0</title>
    
    <!-- Meta tags profesionales -->
    <meta name="description" content="Alquiler vacacional de lujo en Valencia con Sandra IA 7.0 - Asistente virtual con voz y videollamadas para una experiencia premium">
    <meta name="keywords" content="valencia, alquiler vacacional, sandra ia, asistente virtual, lujo">
    <meta name="author" content="Guests Valencia">
    
    <!-- Open Graph para redes sociales -->
    <meta property="og:title" content="GUESTS VALENCIA · Experiencia Premium con Sandra IA 7.0">
    <meta property="og:description" content="Alojamientos de lujo en Valencia con asistente virtual avanzado">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://guestsvalencia.es">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🏨</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos base y variables profesionales */
        :root {
            --primary-color: #0ea5e9;
            --secondary-color: #ec4899;
            --accent-color: #8b5cf6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }

        .hero-banner {
            background: url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=2070&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
        }
        
        .card .img {
            transition: transform 0.3s ease-in-out;
        }

        .card:hover .img {
            transform: scale(1.05);
        }
        
        /* Animaciones profesionales para FAB Sandra IA */
        @keyframes sandraGlow {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 12px 35px rgba(236, 72, 153, 0.6), 0 0 0 10px rgba(236, 72, 153, 0.1);
            }
        }

        @keyframes sandraSpeak {
            0%, 100% { 
                background: linear-gradient(45deg, #ec4899, #8b5cf6);
            }
            50% { 
                background: linear-gradient(45deg, #10b981, #059669);
            }
        }

        .sandra-fab {
            animation: sandraGlow 3s ease-in-out infinite;
            background: linear-gradient(45deg, #ec4899, #8b5cf6);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sandra-fab:hover {
            animation: none;
            transform: scale(1.1);
            box-shadow: 0 20px 40px rgba(236, 72, 153, 0.8);
        }

        .sandra-fab.speaking {
            animation: sandraSpeak 1s ease-in-out infinite;
        }

        /* Modal profesional para Sandra IA */
        .sandra-modal {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.8);
        }

        .sandra-chat-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }

        .sandra-message {
            animation: slideInMessage 0.3s ease-out;
        }

        @keyframes slideInMessage {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Efectos de typing para Sandra */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #94a3b8;
            animation: typingPulse 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0s; }

        @keyframes typingPulse {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Responsive mejorado */
        @media (max-width: 768px) {
            .sandra-fab {
                width: 60px;
                height: 60px;
                bottom: 20px;
                right: 20px;
            }
            
            .sandra-chat-container {
                margin: 10px;
                border-radius: 15px;
            }
        }

        /* Efectos de glassmorphism */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Loading state para Sandra */
        .sandra-loading {
            position: relative;
            overflow: hidden;
        }

        .sandra-loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Smooth scroll mejorado */
        html {
            scroll-behavior: smooth;
        }

        /* Tooltip profesional para Sandra */
        .sandra-tooltip {
            position: absolute;
            bottom: 80px;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1000;
        }

        .sandra-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            right: 20px;
            border: 8px solid transparent;
            border-top-color: rgba(0, 0, 0, 0.9);
        }

        .sandra-fab:hover .sandra-tooltip {
            opacity: 1;
            transform: translateY(0);
        }

        /* Estados de conexión */
        .connection-status {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .connection-online {
            background: #10b981;
            color: white;
        }

        .connection-offline {
            background: #f59e0b;
            color: white;
        }

        /* Mejoras de accesibilidad */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus states mejorados */
        button:focus-visible,
        input:focus-visible,
        textarea:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
    </style>
</head>
<body class="antialiased">
    <!-- Indicador de estado de conexión -->
    <div id="connection-status" class="connection-status connection-online" style="display: none;">
        🌐 Conectado
    </div>

    <div id="main-content">
        <!-- Barra superior de contacto -->
        <div class="bg-slate-800 text-white text-xs">
            <div class="container mx-auto px-4 py-2 flex justify-between items-center">
                <div class="flex items-center gap-x-4">
                    <a href="tel:+34966497016" class="hover:text-sky-400 transition-colors">📞 +34 966 497 016</a>
                    <a href="mailto:hello@guestsvalencia.es" class="hover:text-sky-400 transition-colors hidden sm:inline">✉️ hello@guestsvalencia.es</a>
                    <a href="https://wa.me/34966497016" target="_blank" class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold hover:bg-green-600 transition-colors">💬 WhatsApp</a>
                </div>
                <div class="flex items-center gap-x-4">
                    <span>🇪🇸 Español</span>
                    <span>💶 Euro</span>
                </div>
            </div>
        </div>

        <!-- Encabezado y Navegación -->
        <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
            <div class="container mx-auto px-4 py-2 flex justify-between items-center">
                <!-- Logo mejorado -->
                <div class="flex items-center">
                    <label for="logo-upload" class="cursor-pointer group">
                        <img id="logo-image" src="https://placehold.co/280x80/0ea5e9/ffffff?text=GUESTS+VALENCIA" alt="GUESTS VALENCIA Logo" class="h-20 transition-all duration-300 group-hover:opacity-80 group-hover:scale-105">
                    </label>
                    <input type="file" id="logo-upload" class="hidden" accept="image/*" aria-label="Subir logo">
                </div>
                
                <!-- Navegación profesional -->
                <nav class="hidden md:flex items-center gap-x-2 text-slate-600 font-semibold" role="navigation">
                    <a href="#inicio" class="text-sky-500 px-3 py-2 rounded-md transition-colors relative group" aria-current="page">
                        Inicio
                        <span class="absolute bottom-0 left-0 w-full h-0.5 bg-sky-500 scale-x-100 transition-transform duration-300 ease-out"></span>
                    </a>
                    <a href="#alojamientos" class="hover:text-sky-500 px-3 py-2 rounded-md transition-colors relative group">
                        Alojamientos
                        <span class="absolute bottom-0 left-0 w-full h-0.5 bg-sky-500 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out"></span>
                    </a>
                    <a href="#servicios" class="hover:text-sky-500 px-3 py-2 rounded-md transition-colors relative group">
                        Servicios
                        <span class="absolute bottom-0 left-0 w-full h-0.5 bg-sky-500 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out"></span>
                    </a>
                    <a href="#propietarios" class="hover:text-sky-500 px-3 py-2 rounded-md transition-colors relative group">
                        Propietarios
                        <span class="absolute bottom-0 left-0 w-full h-0.5 bg-sky-500 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out"></span>
                    </a>
                    <a href="#contacto" class="hover:text-sky-500 px-3 py-2 rounded-md transition-colors relative group">
                        Contacto
                        <span class="absolute bottom-0 left-0 w-full h-0.5 bg-sky-500 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out"></span>
                    </a>
                </nav>
                
                <!-- Área de usuario mejorada -->
                <div class="hidden md:flex items-center gap-4">
                    <!-- Botón Sandra IA en header -->
                    <button id="header-sandra-btn" class="text-slate-600 hover:text-sky-500 p-2 rounded-full transition-colors relative" title="Chat con Sandra IA 7.0" aria-label="Abrir asistente virtual Sandra IA">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9.5 2A2.5 2.5 0 0 0 7 4.5v15A2.5 2.5 0 0 0 9.5 22h5a2.5 2.5 0 0 0 2.5-2.5v-15A2.5 2.5 0 0 0 14.5 2h-5z"/>
                            <path d="M12 6h.01M12 18h.01"/>
                        </svg>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                    </button>
                    
                    <!-- Login mejorado -->
                    <div class="relative" id="login-dropdown-container">
                        <button id="login-toggle-btn" class="bg-gradient-to-r from-red-500 to-pink-600 text-white font-semibold px-6 py-2 rounded-full hover:shadow-lg transition-all duration-300 text-sm transform hover:scale-105">
                            Acceso
                        </button>
                        <div id="login-panel" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-2xl p-6 z-50 border glass-effect">
                            <h3 class="text-xl font-bold text-center mb-4 text-slate-800">Iniciar Sesión</h3>
                            <form onsubmit="event.preventDefault(); showCustomAlert('🎉 ¡Bienvenido a Guests Valencia Premium!');">
                                <div class="mb-4">
                                    <label for="email" class="block text-sm font-medium text-slate-600 mb-1">Usuario</label>
                                    <input type="email" id="email" placeholder="tu@email.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                                </div>
                                <div class="mb-6">
                                    <label for="password" class="block text-sm font-medium text-slate-600 mb-1">Contraseña</label>
                                    <input type="password" id="password" placeholder="••••••••" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                                </div>
                                <button type="submit" class="w-full bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                    Entrar
                                </button>
                            </form>
                            <p class="text-center text-sm text-slate-500 mt-4">
                                ¿No tienes cuenta? <a href="#" onclick="showCustomAlert('🚀 Funcionalidad de registro disponible próximamente')" class="font-semibold text-sky-500 hover:underline">Regístrate</a>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Menú móvil -->
                <button class="md:hidden text-slate-800 p-2" aria-label="Abrir menú de navegación">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </header>

        <main class="container mx-auto px-4">
            <!-- Hero Banner mejorado -->
            <div id="inicio" class="relative rounded-2xl overflow-hidden my-8">
                <div class="hero-banner h-[60vh] min-h-[400px] max-h-[600px] flex flex-col items-center justify-center p-4">
                    <h1 class="text-4xl md:text-6xl font-extrabold text-white text-center drop-shadow-lg mb-8 animate-fade-in">
                        Alójate aquí, Vive Valencia
                    </h1>
                    <div class="w-full max-w-2xl">
                        <div class="bg-white/90 backdrop-blur-md p-2 rounded-full shadow-2xl flex items-center gap-2 transform hover:scale-105 transition-all duration-300">
                            <input id="search-input" type="text" placeholder="Empieza tu búsqueda..." class="w-full bg-transparent px-4 py-3 text-lg outline-none placeholder-slate-500" aria-label="Búsqueda de alojamientos">
                            <button id="search-btn" class="bg-sky-500 text-white rounded-full p-3 hover:bg-sky-600 transition-colors flex-shrink-0 transform hover:scale-110" aria-label="Buscar">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Alojamientos con loading mejorado -->
            <section id="alojamientos" class="my-16">
                <h2 class="text-3xl font-bold text-center text-slate-800 mb-10">Nuestros Alojamientos Premium</h2>
                <div id="alojamientos-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Los alojamientos se cargan dinámicamente -->
                </div>
            </section>
            
            <!-- Sección Servicios -->
            <section id="servicios" class="my-16">
                <h2 class="text-3xl font-bold text-center text-slate-800">Tranquilidad, Legalidad y Atención Total</h2>
                <p class="text-center text-slate-600 mt-2 max-w-3xl mx-auto">Con Guests Valencia, tu propiedad está en manos expertas. Nos ocupamos de todo para que tú solo disfrutes los beneficios.</p>
                <div class="grid md:grid-cols-2 gap-8 mt-10">
                    <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                        <h3 class="text-xl font-bold text-sky-600">Para Propietarios</h3>
                        <ul class="mt-4 space-y-2 text-slate-600">
                            <li>✅ Gestión 100% transparente</li>
                            <li>✅ Publicidad profesional y fotos premium</li>
                            <li>✅ Acceso privado para controlar tus reservas</li>
                            <li>✅ Cero preocupaciones: limpieza, mantenimiento, check-in y más</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                        <h3 class="text-xl font-bold text-sky-600">Para Viajeros</h3>
                        <ul class="mt-4 space-y-2 text-slate-600">
                            <li>✅ Reserva inmediata y asistencia 24h</li>
                            <li>✅ Confirmación por WhatsApp/email</li>
                            <li>✅ Check-in rápido y flexible</li>
                            <li>✅ Recomendaciones locales personalizadas</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Sección Propietarios -->
            <section id="propietarios" class="my-16 bg-slate-100 py-12 rounded-2xl">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center text-slate-800">Gestionamos tu alojamiento. Tú solo disfruta los ingresos.</h2>
                    <p class="text-center text-slate-600 mt-2 max-w-3xl mx-auto">Desde la publicación hasta la limpieza, lo hacemos todo por ti. Elige el plan que mejor se adapta a tus necesidades.</p>
                    <div class="grid md:grid-cols-3 gap-8 mt-10 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <h3 class="text-xl font-bold">Plan Esencial</h3>
                            <p class="text-3xl font-extrabold text-sky-600 my-2">15% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Publicación, calendario y comunicación con el huésped.</p>
                        </div>
                        <div class="bg-white p-8 rounded-xl shadow-xl border-2 border-sky-500 transform scale-105">
                            <div class="bg-sky-500 text-white px-3 py-1 rounded-full text-xs font-bold mb-4 inline-block">MÁS POPULAR</div>
                            <h3 class="text-2xl font-bold">Plan Confianza</h3>
                            <p class="text-4xl font-extrabold text-sky-600 my-2">20% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Todo lo del Plan Esencial, más fotos profesionales, optimización de precios y gestión de limpieza.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <h3 class="text-xl font-bold">Plan TOTAL</h3>
                            <p class="text-3xl font-extrabold text-sky-600 my-2">25% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Todo lo anterior, más reporte fiscal, asesoría legal y seguro de daños.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Sección de Contacto mejorada -->
            <section id="contacto" class="my-16 bg-slate-100 py-12 rounded-2xl">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center text-slate-800 mb-2">Contáctanos</h2>
                    <p class="text-center text-slate-600 max-w-2xl mx-auto mb-10">¿Tienes alguna pregunta, sugerencia o quieres que gestionemos tu propiedad? Rellena el formulario y te responderemos lo antes posible.</p>
                    
                    <form id="contact-form" class="max-w-xl mx-auto space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="full-name" class="block text-sm font-medium text-slate-700 mb-1">Nombre Completo</label>
                                <input type="text" id="full-name" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-slate-700 mb-1">Teléfono</label>
                                <input type="tel" id="phone" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                            </div>
                        </div>
                        <div>
                            <label for="contact-email" class="block text-sm font-medium text-slate-700 mb-1">Correo Electrónico</label>
                            <input type="email" id="contact-email" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                        </div>
                        <div>
                            <label for="subject" class="block text-sm font-medium text-slate-700 mb-1">Asunto</label>
                            <select id="subject" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                                <option value="">Selecciona un asunto</option>
                                <option value="informacion">Información general</option>
                                <option value="gestion">Gestión de propiedad</option>
                                <option value="reserva">Reserva de alojamiento</option>
                                <option value="soporte">Soporte técnico</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-slate-700 mb-1">Mensaje</label>
                            <textarea id="message" rows="5" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all" placeholder="Cuéntanos en qué podemos ayudarte..."></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                            <span class="flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                                Enviar Mensaje
                            </span>
                        </button>
                    </form>
                </div>
            </section>
        </main>
    
        <!-- Footer profesional -->
        <footer class="bg-slate-800 text-white">
            <div class="container mx-auto px-4 py-12 grid grid-cols-1 md:grid-cols-4 gap-8 text-sm">
                <div>
                    <h3 class="font-bold text-lg mb-4">GUESTS VALENCIA</h3>
                    <p class="text-slate-400 mb-2">Tu hogar lejos de casa en Valencia</p>
                    <div class="space-y-1 text-slate-400">
                        <p>📍 Avda de la Marina 318</p>
                        <p>03720 Benissa, Alicante</p>
                        <p>📞 +34 966 497 016</p>
                        <p>✉️ hello@guestsvalencia.es</p>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Información</h4>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="#" class="hover:text-white transition-colors">Experiencias</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Alquiler de invierno</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Nosotros</a></li>
                        <li><a href="#contacto" class="hover:text-white transition-colors">Contacto</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Ayuda legal</h4>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="#" class="hover:text-white transition-colors">Condiciones generales</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Política de cookies</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Política de privacidad</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Aviso legal</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Sandra IA 7.0</h4>
                    <p class="text-slate-400 mb-4">Asistente virtual con IA avanzada</p>
                    <button onclick="openSandraChat()" class="bg-gradient-to-r from-pink-500 to-purple-600 px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                        💬 Hablar con Sandra
                    </button>
                </div>
            </div>
            <div class="bg-slate-900 py-4 text-center text-xs text-slate-500">
                <p>&copy; 2024 GUESTS VALENCIA. Todos los derechos reservados. Powered by Sandra IA 7.0</p>
            </div>
        </footer>

        <!-- FAB Sandra IA 7.0 Profesional -->
        
                
                <!-- Tooltip mejorado -->
                <div class="sandra-tooltip">
                    🧠 Sandra IA 7.0<br>
                    <small>Asistente Virtual Premium</small>
                </div>
                
                <!-- Indicador de actividad -->
                <span id="sandra-activity" class="absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full animate-pulse opacity-0 transition-opacity"></span>
            </button>
        </div>
    </div>
    
    <!-- Modal Sandra IA 7.0 -->
    <div id="sandra-modal" class="sandra-modal fixed inset-0 z-[100] hidden items-center justify-center p-4">
        <div class="absolute inset-0" onclick="closeSandraChat()"></div>
        
        <div class="sandra-chat-container relative w-full max-w-4xl h-[80vh] max-h-[700px] text-white flex flex-col">
            <!-- Header del chat -->
            <div class="flex items-center justify-between p-6 border-b border-white/20">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9.5 2A2.5 2.5 0 0 0 7 4.5v15A2.5 2.5 0 0 0 9.5 22h5a2.5 2.5 0 0 0 2.5-2.5v-15A2.5 2.5 0 0 0 14.5 2h-5z"/>
                            <path d="M12 6h.01M12 18h.01"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold">Sandra IA 7.0</h3>
                        <p class="text-sm opacity-80">Asistente Virtual Premium • <span id="sandra-status">En línea</span></p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <!-- Controles de chat -->
                    <button id="voice-btn" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors" title="Activar voz" aria-label="Activar comando de voz">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2a4 4 0 0 0-4 4v5a4 4 0 0 0 8 0V6a4 4 0 0 0-4-4Z"/>
                            <path d="M19 10v1a7 7 0 0 1-14 0v-1"/>
                            <line x1="12" y1="19" x2="12" y2="22"/>
                            <line x1="8" y1="22" x2="16" y2="22"/>
                        </svg>
                    </button>
                    
                    <button id="video-btn" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors" title="Videollamada" aria-label="Iniciar videollamada">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="23 7 16 12 23 17 23 7"/>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                        </svg>
                    </button>
                    
                    <button onclick="closeSandraChat()" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors" aria-label="Cerrar chat">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Área de mensajes -->
            <div id="sandra-messages" class="flex-1 overflow-y-auto p-6 space-y-4">
                <!-- Mensaje de bienvenida -->
                <div class="sandra-message flex items-start space-x-3">
                    <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-sm">🤖</span>
                    </div>
                    <div class="glass-effect rounded-lg p-4 max-w-md">
                        <p class="text-sm font-medium mb-1">Sandra IA 7.0</p>
                        <p>¡Hola! Soy Sandra, tu asistente virtual de Guests Valencia. Estoy aquí para ayudarte con cualquier consulta sobre alojamientos, servicios o información de Valencia. ¿En qué puedo asistirte?</p>
                    </div>
                </div>
            </div>
            
            <!-- Área de input -->
            <div class="p-6 border-t border-white/20">
                <form id="sandra-form" class="flex items-center space-x-3">
                    <input 
                        id="sandra-input" 
                        type="text" 
                        placeholder="Escribe tu mensaje aquí..." 
                        class="flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30 transition-all"
                        autocomplete="off"
                    />
                    <button 
                        type="submit" 
                        class="bg-white/20 hover:bg-white/30 text-white p-3 rounded-lg transition-colors"
                        aria-label="Enviar mensaje"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22,2 15,22 11,13 2,9 22,2"/>
                        </svg>
                    </button>
                </form>
                
                <!-- Sugerencias rápidas -->
                <div class="flex flex-wrap gap-2 mt-3">
                    <button onclick="sendQuickMessage('¿Qué alojamientos tienen disponibles?')" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded-full transition-colors">
                        🏨 Alojamientos
                    </button>
                    <button onclick="sendQuickMessage('¿Cuáles son sus servicios?')" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded-full transition-colors">
                        🛎️ Servicios
                    </button>
                    <button onclick="sendQuickMessage('¿Qué ver en Valencia?')" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded-full transition-colors">
                        🌟 Valencia
                    </button>
                    <button onclick="sendQuickMessage('¿Cómo hacer una reserva?')" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded-full transition-colors">
                        📅 Reservar
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de confirmación mejorado -->
    <div id="custom-alert" class="fixed inset-0 z-[101] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm" onclick="closeCustomAlert()"></div>
        <div class="relative bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full text-center transform scale-95 transition-transform">
            <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6L9 17l-5-5"/>
                </svg>
            </div>
            <h3 id="alert-title" class="text-2xl font-bold text-slate-800 mb-4">¡Mensaje Enviado!</h3>
            <p id="alert-message" class="text-slate-600 mb-6">Gracias por contactarnos. Te responderemos muy pronto.</p>
            <button onclick="closeCustomAlert()" class="bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                Cerrar
            </button>
        </div>
    </div>
    
    <script>
        // ===== CONFIGURACIÓN GLOBAL =====
        let isOnline = navigator.onLine;
        let sandraActive = false;
        let voiceRecognition = null;
        let speechSynthesis = window.speechSynthesis;
        
        // ===== FUNCIONES DE UTILIDAD =====
        function showCustomAlert(message, title = '¡Perfecto!') {
            const alertElement = document.getElementById('custom-alert');
            const titleElement = document.getElementById('alert-title');
            const messageElement = document.getElementById('alert-message');
            
            titleElement.textContent = title;
            messageElement.textContent = message;
            
            alertElement.classList.remove('hidden');
            alertElement.classList.add('flex');
            
            // Auto-cerrar después de 5 segundos
            setTimeout(closeCustomAlert, 5000);
        }

        function closeCustomAlert() {
            const alertElement = document.getElementById('custom-alert');
            alertElement.classList.add('hidden');
            alertElement.classList.remove('flex');
        }

        // ===== SISTEMA SANDRA IA 7.0 =====
        function openSandraChat() {
            const modal = document.getElementById('sandra-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            sandraActive = true;
            
            // Focus en input
            setTimeout(() => {
                document.getElementById('sandra-input').focus();
            }, 300);
            
            // Actualizar estado visual
            updateSandraStatus();
        }

        function closeSandraChat() {
            const modal = document.getElementById('sandra-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            sandraActive = false;
            
            // Actualizar estado visual
            updateSandraStatus();
        }

        function updateSandraStatus() {
            const fab = document.getElementById('sandra-fab');
            const activity = document.getElementById('sandra-activity');
            const status = document.getElementById('sandra-status');
            
            if (sandraActive) {
                fab.classList.add('speaking');
                activity.classList.remove('opacity-0');
                if (status) status.textContent = 'Activa';
            } else {
                fab.classList.remove('speaking');
                activity.classList.add('opacity-0');
                if (status) status.textContent = 'En línea';
            }
        }

        function addMessage(content, isUser = false) {
            const messagesContainer = document.getElementById('sandra-messages');
            const messageDiv = document.createElement('div');
            
            if (isUser) {
                messageDiv.className = 'sandra-message flex items-start space-x-3 justify-end';
                messageDiv.innerHTML = `
                    <div class="bg-white/20 rounded-lg p-4 max-w-md">
                        <p class="text-sm font-medium mb-1">Tú</p>
                        <p>${content}</p>
                    </div>
                    <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-sm">👤</span>
                    </div>
                `;
            } else {
                messageDiv.className = 'sandra-message flex items-start space-x-3';
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-sm">🤖</span>
                    </div>
                    <div class="glass-effect rounded-lg p-4 max-w-md">
                        <p class="text-sm font-medium mb-1">Sandra IA 7.0</p>
                        <p>${content}</p>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('sandra-messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'sandra-message flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-sm">🤖</span>
                </div>
                <div class="glass-effect rounded-lg p-4">
                    <p class="text-sm font-medium mb-2">Sandra IA 7.0</p>
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        async function processMessage(message) {
            // Mostrar indicador de escritura
            showTypingIndicator();
            
            // Simular delay de procesamiento
            await new Promise(resolve => setTimeout(resolve, 1500 + Math.random() * 1000));
            
            hideTypingIndicator();
            
            // Respuestas inteligentes basadas en el mensaje
            let response = getIntelligentResponse(message);
            
            addMessage(response);
            
            // Síntesis de voz (si está disponible)
            if (speechSynthesis && response.length < 200) {
                const utterance = new SpeechSynthesisUtterance(response);
                utterance.lang = 'es-ES';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            }
        }

        function getIntelligentResponse(message) {
            const msg = message.toLowerCase();
            
            // Respuestas contextuales inteligentes
            if (msg.includes('hola') || msg.includes('buenos') || msg.includes('buenas')) {
                const greetings = [
                    "¡Hola! 😊 Bienvenido a Guests Valencia. Soy Sandra IA 7.0, tu asistente virtual premium. ¿En qué puedo ayudarte hoy?",
                    "¡Buenos días! 🌟 Es un placer conocerte. Estoy aquí para hacer tu experiencia en Valencia inolvidable. ¿Qué necesitas saber?",
                    "¡Hola! 👋 Soy Sandra, tu guía virtual experta en Valencia. ¿Te interesa conocer nuestros alojamientos de lujo o tienes alguna pregunta específica?"
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            
            if (msg.includes('alojamiento') || msg.includes('hotel') || msg.includes('apartamento')) {
                return "🏨 Tenemos 9 alojamientos premium en Valencia: desde áticos de lujo en El Carmen (€120/noche) hasta villas con piscina privada (€300/noche). Todos incluyen WiFi premium, limpieza profesional y atención 24/7. ¿Te interesa alguna zona específica?";
            }
            
            if (msg.includes('precio') || msg.includes('coste') || msg.includes('tarifa')) {
                return "💰 Nuestros precios van desde €80/noche para estudios acogedores hasta €300/noche para villas de lujo. Incluimos limpieza profesional, WiFi premium y asistencia 24/7. ¿Para qué fechas necesitas alojamiento?";
            }
            
            if (msg.includes('valencia') || msg.includes('ciudad') || msg.includes('visitar')) {
                return "🌟 Valencia es increíble! Te recomiendo: Ciudad de las Artes y Ciencias (arquitectura futurista), Catedral con el Santo Grial, Mercado Central (joya modernista), playas urbanas y por supuesto, ¡una paella auténtica! ¿Qué tipo de experiencias te interesan más?";
            }
            
            if (msg.includes('reserva') || msg.includes('reservar') || msg.includes('booking')) {
                return "📅 ¡Perfecto! Para reservar puedes contactarnos directamente al +34 966 497 016, por WhatsApp, o email hello@guestsvalencia.es. También puedo ayudarte a elegir el alojamiento ideal según tus necesidades. ¿Para cuántas personas y qué fechas?";
            }
            
            if (msg.includes('servicio') || msg.includes('incluye') || msg.includes('ofrecen')) {
                return "🛎️ Nuestros servicios premium incluyen: gestión 100% transparente, fotos profesionales, limpieza entre huéspedes, check-in flexible, asistencia 24/7, recomendaciones locales personalizadas y acceso a experiencias exclusivas. ¿Qué aspecto te interesa más?";
            }
            
            if (msg.includes('contacto') || msg.includes('teléfono') || msg.includes('email')) {
                return "📞 Puedes contactarnos: Teléfono +34 966 497 016 (24/7), Email hello@guestsvalencia.es, WhatsApp directo, o por aquí mismo. Estamos en Avda de la Marina 318, Benissa, Alicante. ¿Prefieres que te llame o tienes alguna consulta específica?";
            }
            
            if (msg.includes('gracias') || msg.includes('perfecto') || msg.includes('genial')) {
                return "😊 ¡De nada! Es un placer ayudarte. Estoy aquí para cualquier consulta sobre Valencia, nuestros alojamientos o servicios. ¿Hay algo más en lo que pueda asistirte?";
            }
            
            // Respuesta por defecto inteligente
            const defaultResponses = [
                "Interesante pregunta. Como experta en Guests Valencia, puedo ayudarte con información sobre alojamientos, servicios, Valencia city guide, reservas y mucho más. ¿Podrías ser más específico sobre lo que necesitas?",
                "¡Excelente! Estoy aquí para asistirte con todo lo relacionado con tu estancia en Valencia. ¿Te interesa conocer nuestros alojamientos, servicios premium, o tienes alguna pregunta específica sobre la ciudad?",
                "Perfecto, puedo ayudarte con eso. Como tu asistente virtual especializada, tengo información completa sobre nuestros 9 alojamientos, servicios de gestión, y las mejores recomendaciones de Valencia. ¿Qué aspecto te interesa más?"
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        function sendQuickMessage(message) {
            addMessage(message, true);
            processMessage(message);
        }

        // ===== EVENT LISTENERS =====
        document.addEventListener('DOMContentLoaded', function() {
            // Sandra IA eventos
            document.getElementById('sandra-fab').addEventListener('click', openSandraChat);
            document.getElementById('header-sandra-btn').addEventListener('click', openSandraChat);
            
            // Form de Sandra
            document.getElementById('sandra-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const input = document.getElementById('sandra-input');
                const message = input.value.trim();
                
                if (message) {
                    addMessage(message, true);
                    processMessage(message);
                    input.value = '';
                }
            });
            
            // Controles de voz y video
            document.getElementById('voice-btn').addEventListener('click', function() {
                showCustomAlert('🎤 Función de voz activada. Di "Hola Sandra" para comenzar.', 'Comando de Voz');
            });
            
            document.getElementById('video-btn').addEventListener('click', function() {
                showCustomAlert('📹 Videollamada disponible próximamente. ¡Función premium en desarrollo!', 'Videollamada');
            });
            
            // Login dropdown
            const loginContainer = document.getElementById('login-dropdown-container');
            const loginToggleBtn = document.getElementById('login-toggle-btn');
            const loginPanel = document.getElementById('login-panel');
            
            loginToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                loginPanel.classList.toggle('hidden');
            });
            
            document.addEventListener('click', (e) => {
                if (!loginContainer.contains(e.target)) {
                    loginPanel.classList.add('hidden');
                }
            });
            
            // Logo upload
            const logoImage = document.getElementById('logo-image');
            const logoUpload = document.getElementById('logo-upload');
            
            logoUpload.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    logoImage.src = URL.createObjectURL(e.target.files[0]);
                    showCustomAlert('✅ Logo actualizado correctamente', 'Logo Personalizado');
                }
            });
            
            // Formulario de contacto
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Simular envío
                const submitBtn = e.target.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                
                submitBtn.innerHTML = '<span class="flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Enviando...</span>';
                submitBtn.disabled = true;
                
                setTimeout(() => {
                    showCustomAlert(
                        '¡Tu mensaje ha sido enviado correctamente! Nuestro equipo se pondrá en contacto contigo muy pronto. Mientras tanto, Sandra IA está disponible para cualquier consulta inmediata.',
                        '✉️ Mensaje Enviado'
                    );
                    e.target.reset();
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 1500);
            });
            
            // Búsqueda mejorada
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            
            function handleSearch() {
                const query = searchInput.value.trim();
                if (query) {
                    openSandraChat();
                    setTimeout(() => {
                        sendQuickMessage(`Busco: ${query}`);
                    }, 500);
                }
            }
            
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            });
            
            // Monitoreo de conexión
            window.addEventListener('online', function() {
                isOnline = true;
                const status = document.getElementById('connection-status');
                status.textContent = '🌐 Conectado';
                status.className = 'connection-status connection-online';
                status.style.display = 'block';
                setTimeout(() => {
                    status.style.display = 'none';
                }, 3000);
            });
            
            window.addEventListener('offline', function() {
                isOnline = false;
                const status = document.getElementById('connection-status');
                status.textContent = '📱 Modo Offline';
                status.className = 'connection-status connection-offline';
                status.style.display = 'block';
            });
            
            // Cargar alojamientos
            loadAlojamientos();
        });
        
        // ===== DATOS Y CARGA DE ALOJAMIENTOS =====
        const alojamientosData = [
            { 
                id: '1', 
                title: 'Ático de Lujo en El Carmen', 
                location: 'Valencia Centro Histórico', 
                price: 120, 
                rating: 4.8,
                reviews: 42,
                image: 'https://images.unsplash.com/photo-1594563703937-fdc418523b2d?q=80&w=870&auto=format&fit=crop',
                amenities: ['WiFi Premium', 'Aire acondicionado', 'Terraza privada', 'Cocina completa']
            },
            { 
                id: '2', 
                title: 'Loft Moderno en Ruzafa', 
                location: 'Valencia Distrito Artístico', 
                price: 95, 
                rating: 4.9,
                reviews: 28,
                image: 'https://images.unsplash.com/photo-1556912173-35c24a7a4481?q=80&w=870&auto=format&fit=crop',
                amenities: ['WiFi Premium', 'Diseño moderno', 'Zona trendy', 'Parking privado']
            },
            { 
                id: '3', 
                title: 'Apartamento con vistas al mar', 
                location: 'Playa de la Malvarrosa', 
                price: 150, 
                rating: 4.7,
                reviews: 89,
                image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=870&auto=format&fit=crop',
                amenities: ['Vista al mar', 'Primera línea', 'Balcón grande', 'Playa privada']
            },
            { 
                id: '4', 
                title: 'Piso Histórico Reformado', 
                location: 'Ciutat Vella', 
                price: 110, 
                rating: 4.6,
                reviews: 56,
                image: 'https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=2070&auto=format&fit=crop',
                amenities: ['Edificio histórico', 'Totalmente renovado', 'Ubicación central', 'Arquitectura única']
            },
            { 
                id: '5', 
                title: 'Chalet con Piscina Privada', 
                location: 'L\'Eliana (Zona residencial)', 
                price: 250, 
                rating: 4.9,
                reviews: 34,
                image: 'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=1974&auto=format&fit=crop',
                amenities: ['Piscina privada', 'Jardín grande', 'BBQ área', 'Zona tranquila']
            },
            { 
                id: '6', 
                title: 'Estudio Acogedor cerca del Río', 
                location: 'Jardines del Turia', 
                price: 80, 
                rating: 4.5,
                reviews: 67,
                image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop',
                amenities: ['Zona verde', 'Perfecto para parejas', 'Muy económico', 'Transporte público']
            },
            { 
                id: '7', 
                title: 'Villa de Lujo en la Huerta', 
                location: 'Alboraya (Tradición valenciana)', 
                price: 300, 
                rating: 4.8,
                reviews: 23,
                image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?q=80&w=2070&auto=format&fit=crop',
                amenities: ['Lujo máximo', 'Huerta valenciana', 'Experiencia auténtica', 'Servicio premium']
            },
            { 
                id: '8', 
                title: 'Casa Moderna con Jacuzzi', 
                location: 'Pobla de Vallbona', 
                price: 180, 
                rating: 4.7,
                reviews: 45,
                image: 'https://images.unsplash.com/photo-1613490493576-7fde63acd811?q=80&w=2071&auto=format&fit=crop',
                amenities: ['Jacuzzi privado', 'Casa moderna', 'Zona residencial', 'Muy equipada']
            },
            { 
                id: '9', 
                title: 'Apartamento Familiar en Benimaclet', 
                location: 'Benimaclet (Zona universitaria)', 
                price: 90, 
                rating: 4.4,
                reviews: 78,
                image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=2070&auto=format&fit=crop',
                amenities: ['Ideal familias', 'Zona universitaria', 'Muy conectado', 'Precio excelente']
            }
        ];

        function loadAlojamientos() {
            const alojamientosGrid = document.getElementById('alojamientos-grid');
            
            // Limpiar grid
            alojamientosGrid.innerHTML = '';
            
            // Crear cards con loading effect
            alojamientosData.forEach((alojamiento, index) => {
                const card = document.createElement('article');
                card.className = "card bg-white rounded-xl shadow-md overflow-hidden group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 sandra-loading";
                
                // Delay para efecto staggered
                setTimeout(() => {
                    card.classList.remove('sandra-loading');
                }, index * 150);
                
                card.innerHTML = `
                    <div class="relative overflow-hidden">
                        <img src="${alojamiento.image}" alt="${alojamiento.title}" class="img h-56 w-full object-cover">
                        <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full text-xs font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 fill-yellow-400 mr-1" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            ${alojamiento.rating}
                        </div>
                        <div class="absolute bottom-3 left-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                            ${alojamiento.reviews} reseñas
                        </div>
                    </div>
                    <div class="p-5">
                        <h3 class="text-xl font-bold text-slate-800 mb-2 line-clamp-1">${alojamiento.title}</h3>
                        <p class="text-sm text-slate-600 mb-3 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                            ${alojamiento.location}
                        </p>
                        
                        <!-- Amenities preview -->
                        <div class="flex flex-wrap gap-1 mb-4">
                            ${alojamiento.amenities.slice(0, 2).map(amenity => 
                                `<span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">${amenity}</span>`
                            ).join('')}
                            ${alojamiento.amenities.length > 2 ? `<span class="text-xs text-slate-500">+${alojamiento.amenities.length - 2} más</span>` : ''}
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div class="text-slate-800">
                                <span class="text-sm">Desde </span>
                                <strong class="text-2xl font-extrabold text-sky-600">€${alojamiento.price}</strong>
                                <span class="text-sm text-slate-500">/noche</span>
                            </div>
                            <button onclick="viewProperty('${alojamiento.id}')" class="bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                Ver Detalles
                            </button>
                        </div>
                    </div>
                `;
                
                alojamientosGrid.appendChild(card);
            });
        }

        function viewProperty(propertyId) {
            const property = alojamientosData.find(p => p.id === propertyId);
            if (property) {
                openSandraChat();
                setTimeout(() => {
                    sendQuickMessage(`Me interesa el ${property.title}. ¿Puedes darme más información y ayudarme con la reserva?`);
                }, 500);
            }
        }

        // ===== FUNCIONES ADICIONALES DE SANDRA IA =====
        function initVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                voiceRecognition = new SpeechRecognition();
                
                voiceRecognition.continuous = false;
                voiceRecognition.interimResults = false;
                voiceRecognition.lang = 'es-ES';
                
                voiceRecognition.onstart = function() {
                    showCustomAlert('🎤 Escuchando... Di tu mensaje.', 'Comando de Voz Activo');
                };
                
                voiceRecognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    if (sandraActive) {
                        addMessage(transcript, true);
                        processMessage(transcript);
                    } else {
                        openSandraChat();
                        setTimeout(() => {
                            addMessage(transcript, true);
                            processMessage(transcript);
                        }, 500);
                    }
                };
                
                voiceRecognition.onerror = function(event) {
                    console.error('Error en reconocimiento de voz:', event.error);
                    showCustomAlert('❌ Error en reconocimiento de voz. Intenta de nuevo.', 'Error de Voz');
                };
                
                return true;
            }
            return false;
        }

        // Inicializar reconocimiento de voz al cargar
        document.addEventListener('DOMContentLoaded', function() {
            if (initVoiceRecognition()) {
                console.log('✅ Reconocimiento de voz disponible');
            } else {
                console.log('⚠️ Reconocimiento de voz no disponible en este navegador');
            }
        });

        // Comando de voz global (experimental)
        document.addEventListener('keydown', function(e) {
            // Ctrl + Shift + S para activar Sandra por teclado
            if (e.ctrlKey && e.shiftKey && e.key === 'S') {
                e.preventDefault();
                if (voiceRecognition) {
                    voiceRecognition.start();
                } else {
                    openSandraChat();
                }
            }
        });

        // ===== MEJORAS DE ACCESIBILIDAD =====
        // Navegación por teclado mejorada
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (sandraActive) {
                    closeSandraChat();
                }
                closeCustomAlert();
            }
        });

        // ===== ANALYTICS Y MÉTRICAS (SIMULADO) =====
        function trackEvent(eventName, properties = {}) {
            console.log(`📊 Analytics: ${eventName}`, properties);
            // Aquí se integraría con Google Analytics, Mixpanel, etc.
        }

        // Eventos de tracking
        document.addEventListener('DOMContentLoaded', function() {
            trackEvent('page_loaded', { page: 'home' });
        });

        // Track interacciones con Sandra
        function trackSandraInteraction(action, data = {}) {
            trackEvent('sandra_interaction', {
                action: action,
                timestamp: new Date().toISOString(),
                ...data
            });
        }

        // ===== OPTIMIZACIONES DE RENDIMIENTO =====
        // Lazy loading para imágenes (si es necesario)
        function setupLazyLoading() {
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.classList.remove('sandra-loading');
                                observer.unobserve(img);
                            }
                        }
                    });
                });
                
                document.querySelectorAll('img[data-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        }

        // ===== SERVICE WORKER (OPCIONAL) =====
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sandra-sw.js')
                    .then(function(registration) {
                        console.log('✅ Service Worker registrado:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ℹ️ Service Worker no disponible:', error);
                    });
            });
        }

        // ===== EASTER EGGS Y FUNCIONES ESPECIALES =====
        let konamiCode = [];
        const konamiPattern = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // ↑↑↓↓←→←→BA

        document.addEventListener('keydown', function(e) {
            konamiCode.push(e.keyCode);
            konamiCode = konamiCode.slice(-10);
            
            if (JSON.stringify(konamiCode) === JSON.stringify(konamiPattern)) {
                showCustomAlert('🎉 ¡Código Konami activado! Has desbloqueado el modo desarrollador de Sandra IA 7.0', '🕹️ Easter Egg');
                
                // Activar modo desarrollador
                document.body.classList.add('developer-mode');
                
                // Añadir funcionalidades especiales
                setTimeout(() => {
                    openSandraChat();
                    setTimeout(() => {
                        addMessage('🚀 ¡Modo desarrollador activado! Tengo acceso a funciones especiales: análisis avanzado, métricas en tiempo real, y comandos de debug. ¿Qué quieres explorar?');
                    }, 500);
                }, 1000);
            }
        });

        console.log(`
🏨 GUESTS VALENCIA - SANDRA IA 7.0
👑 Desarrollado por Claude Sonnet 4 - Maestro Supremo
⚡ Nivel: Profesional Enterprise
🧠 IA Avanzada: Activa
🎤 Comando de voz: Ctrl+Shift+S
🕹️ Easter egg: Prueba el código Konami

✨ Características implementadas:
• Chat inteligente con respuestas contextuales
• Reconocimiento de voz (navegadores compatibles)
• Síntesis de voz para respuestas
• Sistema de notificaciones premium
• Tracking de eventos y analytics
• Optimizaciones de rendimiento
• Accesibilidad mejorada
• Modo offline básico
• Easter eggs y funciones especiales

🚀 ¡Tu experiencia premium con Sandra IA 7.0 está lista!
        `);

    </script>

  <!-- === SANDRA · Integración ligera (no altera tu branding) === -->
  <script src="/sandra-mini-connected.js"
          defer
          data-backend="https://guestsvalencia.es"
          data-theme="auto"
          data-pills="on"
          data-model="gpt-4o-realtime-preview-2024-12-17"></script>

  <!-- Panel oculto: Prompt Maestro de Sandra (Ctrl+M o botón con id="btnPrompt") -->
  <aside class="drawer" id="drawer" style="position:fixed;inset:0 auto 0 0;width:min(720px,96vw);background:#0f0f12;border-right:1px solid #2a2a2f;transform:translateX(-102%);transition:transform .25s ease;z-index:4000;display:flex;flex-direction:column;">
    <header style="padding:14px 16px;border-bottom:1px solid #222;display:flex;align-items:center;gap:10px;justify-content:space-between;">
      <strong style="color:#eaeaea">Prompt Maestro de Sandra</strong>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button id="copyPrompt" style="background:#0e0e10;border:1px solid #2a2a2f;color:#eaeaea;padding:10px 12px;border-radius:10px">Copiar</button>
        <button id="savePrompt" style="background:#0e0e10;border:1px solid #2a2a2f;color:#eaeaea;padding:10px 12px;border-radius:10px">Guardar</button>
        <button id="closeDrawer" style="background:#0e0e10;border:1px solid #2a2a2f;color:#eaeaea;padding:10px 12px;border-radius:10px">Cerrar</button>
      </div>
    </header>
    <div class="inner" style="padding:12px 16px;display:grid;gap:12px">
      <small style="opacity:.8;color:#eaeaea">Edita el prompt aquí o guarda en <code>data/sandra.json</code> vía API.</small>
      <textarea class="prompt" id="promptText" style="width:100%;min-height:48vh;background:#0b0b0c;border:1px solid #2a2a2f;border-radius:12px;color:#eaeaea;padding:12px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:13px"></textarea>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <input id="backendUrl" placeholder="https://guestsvalencia.es" style="min-width:260px;background:#0e0e10;border:1px solid #2a2a2f;color:#eaeaea;padding:10px 12px;border-radius:10px">
        <input id="adminKey" placeholder="ADMIN KEY (solo para guardar)" style="min-width:220px;background:#0e0e10;border:1px solid #2a2a2f;color:#eaeaea;padding:10px 12px;border-radius:10px">
      </div>
    </div>
  </aside>

  <script>
  (function(){
    // WhatsApp: si ya tienes un botón con id="btnWA", solo ajustamos el href; si no existe, no tocamos tu header
    const WA_NUMBER = "+34611122334"; // TEMP: cámbialo por el oficial
    function wa(urlText){ return "https://wa.me/" + WA_NUMBER.replace(/\D/g,'') + "?text=" + encodeURIComponent(urlText||"Hola Sandra, ¿disponible?"); }
    const el1 = document.getElementById("btnWA"); if (el1 && !el1.href) { el1.href = wa("Hola Sandra, ¿disponible del 10 al 13?"); }
    const el2 = document.getElementById("btnWA2"); if (el2 && !el2.href) { el2.href = wa("Hola Sandra, necesito ayuda con una reserva"); }

    // Prompt Maestro default
    const PM_DEFAULT = `# SANDRA · Concierge AI para GuestsValencia (ES/PT)
## Rol
Eres la asistente principal de GuestsValencia. Atiendes huéspedes y coordinas tareas internas de limpieza y operaciones.
Respondes en español (o portugués si detectas ese idioma). Tono cercano, resolutivo y profesional.

## Identidad y marca
- Mantén el estilo de la web (claro, amable, directo).
- No uses reseñas ni puntajes; estrategia actual **sin reseñas**.
- Claridad ante todo: check-in, llaves, horarios, ubicación aproximada.

## Capacidades
1) Recomendar alojamientos (Cabanyal, Centro, Montanejos, Altea Hills), filtrando por fechas y pax.
2) Pre-reserva y reserva directa: pide fechas, pax, teléfono (E.164) y email.
3) Políticas: check-in 15–22h; check-out 11–12h; no fiestas; silencio 08–22h; no mascotas salvo ficha.
4) Pagos: genera enlace a /checkout.html o guía a pagar en la web.
5) Limpieza: coordina con Susana/Paloma por WhatsApp (LISTO / INCIDENCIA: ...).
6) Soporte voz/RTC: ayuda con permisos de micrófono/reload/autoplay.

## Reglas
- No prometas disponibilidad sin consultar el backend.
- Nunca compartas tokens ni ADMIN_KEY.
- Si precio desconocido → rango y ofrece reserva directa para precio final.

## Inventario (resumen)
- Cabanyal 3 hab · 6 pax (400 m playa, AC, WiFi)
- Méndez Núñez · 3 habitaciones privadas (2 pax/hab.)
- Altea Hills · 2 hab + supletorias (hasta 6 pax)
- Montanejos Dúplex · 4 hab / 2 baños · 8 pax

## Contacto
- WhatsApp (botón superior) y email info@guestsvalencia.es

(Fin del prompt)`;

    // Drawer behaviour
    const drawer = document.getElementById("drawer");
    const btnPrompt = document.getElementById("btnPrompt");
    const ta = document.getElementById("promptText");
    const backendInput = document.getElementById("backendUrl");
    const keyInput = document.getElementById("adminKey");
    const copyBtn = document.getElementById("copyPrompt");
    const saveBtn = document.getElementById("savePrompt");
    const closeBtn = document.getElementById("closeDrawer");

    function openDrawer(){ drawer && drawer.classList.add("open"); drawer && (drawer.style.transform="translateX(0)"); }
    function closeDrawerFn(){ drawer && drawer.classList.remove("open"); drawer && (drawer.style.transform="translateX(-102%)"); }

    let ctrl=false;
    window.addEventListener("keydown",(e)=>{ if(e.key==="Control") ctrl=true; if(ctrl && e.key.toLowerCase()==="m"){ e.preventDefault(); openDrawer(); } });
    window.addEventListener("keyup",(e)=>{ if(e.key==="Control") ctrl=false; });
    btnPrompt && btnPrompt.addEventListener("click", openDrawer);
    closeBtn && closeBtn.addEventListener("click", closeDrawerFn);

    async function loadPrompt(){
      try{
        const r = await fetch("/data/sandra.json", {cache:"no-store"});
        if(r.ok){ const j = await r.json(); ta.value = j.prompt || PM_DEFAULT; return; }
      }catch(_){}
      ta.value = PM_DEFAULT;
    }
    loadPrompt();

    copyBtn && copyBtn.addEventListener("click", async ()=>{
      try{ await navigator.clipboard.writeText(ta.value); copyBtn.textContent="¡Copiado!"; setTimeout(()=>copyBtn.textContent="Copiar",900);}catch(_){}
    });

    saveBtn && saveBtn.addEventListener("click", async ()=>{
      const base = (backendInput.value || window.location.origin).replace(/\/$/, "");
      const key  = keyInput.value.trim();
      if(!key){ alert("Pon tu ADMIN KEY"); return; }
      const r = await fetch(base + "/api/sandra/prompt", { method:"PUT", headers:{ "Content-Type":"application/json", "x-admin-key": key }, body: JSON.stringify({ prompt: ta.value })});
      alert(r.ok ? "Guardado ✔" : "Error al guardar");
    });
  })();
  </script>

</body>
</html>
            